<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODELO XY49</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0B0E11 0%, #161A1E 100%);
            color: #EAECEF;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(24, 26, 32, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(240, 185, 11, 0.2);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #F0B90B, #FCD434);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #0B0E11;
            font-size: 18px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(135deg, #F0B90B, #FCD434);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #2EBD85;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #2EBD85;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .panel {
            background: rgba(24, 26, 32, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(240, 185, 11, 0.1);
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .panel:hover {
            border-color: rgba(240, 185, 11, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .panel-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #F0B90B, #FCD434);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .entry-section {
            border: 1px solid rgba(240, 185, 11, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            background: rgba(16, 18, 24, 0.3);
        }

        .entry-title {
            font-size: 16px;
            font-weight: 600;
            color: #F0B90B;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #B7BDC6;
            font-size: 14px;
        }

        .input-field {
            width: 100%;
            padding: 12px 16px;
            background: rgba(16, 18, 24, 0.8);
            border: 1px solid rgba(240, 185, 11, 0.2);
            border-radius: 8px;
            color: #EAECEF;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #F0B90B;
            box-shadow: 0 0 0 3px rgba(240, 185, 11, 0.1);
            background: rgba(16, 18, 24, 1);
        }

        .currency-input {
            position: relative;
        }

        .currency-symbol {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #F0B90B;
            font-weight: bold;
            pointer-events: none;
        }

        .currency-input .input-field {
            padding-left: 35px;
        }

        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #F0B90B, #FCD434);
            color: #0B0E11;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(240, 185, 11, 0.3);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .results-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .result-card {
            background: rgba(16, 18, 24, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(240, 185, 11, 0.1);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            border-color: rgba(240, 185, 11, 0.3);
        }

        .result-label {
            font-size: 14px;
            color: #B7BDC6;
            margin-bottom: 0.5rem;
        }

        .result-value {
            font-size: 20px;
            font-weight: 600;
            color: #2EBD85;
        }

        .projection-section {
            max-width: 1400px;
            margin: 2rem auto 0;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .projection-panel {
            background: rgba(24, 26, 32, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(240, 185, 11, 0.1);
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .projection-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #F0B90B;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .projection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: rgba(16, 18, 24, 0.4);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border-left: 3px solid #F0B90B;
        }

        .projection-number {
            font-weight: 600;
            color: #F0B90B;
        }

        .projection-amount {
            font-weight: 600;
            color: #2EBD85;
        }

        .combined-item {
            border-left-color: #2EBD85;
        }

        .projection-summary {
            background: rgba(46, 189, 133, 0.1);
            border: 1px solid rgba(46, 189, 133, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .summary-title {
            color: #2EBD85;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .summary-text {
            color: #EAECEF;
            line-height: 1.5;
            font-size: 14px;
        }

        .icon {
            font-size: 18px;
        }

        .footer {
            background: rgba(24, 26, 32, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(240, 185, 11, 0.2);
            padding: 1.5rem 2rem;
            text-align: center;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            color: #B7BDC6;
            font-size: 14px;
        }

        .footer-link {
            color: #F0B90B;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .footer-link:hover {
            color: #FCD434;
            text-shadow: 0 0 8px rgba(240, 185, 11, 0.5);
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .projection-section {
                grid-template-columns: 1fr;
            }

            .input-row {
                grid-template-columns: 1fr;
            }
        }

        .glow-effect {
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }
            to {
                box-shadow: 0 8px 32px rgba(240, 185, 11, 0.2), 0 0 40px rgba(240, 185, 11, 0.1);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">₿</div>
                <div class="logo-text">MODELO XY49</div>
            </div>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>Sistema Activo</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="panel">
            <h2 class="panel-title">
                <span class="icon">📊</span>
                Configuración de Operaciones
            </h2>

            <!-- Configuración Global -->
            <div class="input-group">
                <label class="input-label">Capital Total Disponible</label>
                <div class="currency-input">
                    <span class="currency-symbol">$</span>
                    <input type="number" class="input-field" id="totalCapital" placeholder="10000" step="0.01">
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">Número de Operaciones Proyectadas</label>
                <input type="number" class="input-field" id="numberOfOperations" placeholder="10" min="1" max="100">
            </div>

            <!-- Entrada 1 -->
            <div class="entry-section">
                <div class="entry-title">
                    <span class="icon">🎯</span>
                    Entrada 1
                </div>
                <div class="input-row">
                    <div class="input-group">
                        <label class="input-label">Capital Asignado</label>
                        <div class="currency-input">
                            <span class="currency-symbol">$</span>
                            <input type="number" class="input-field" id="entry1Capital" placeholder="3000" step="0.01">
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Take Profit (%)</label>
                        <input type="number" class="input-field" id="entry1Percent" placeholder="5" step="0.1">
                    </div>
                </div>
            </div>

            <!-- Entrada 2 -->
            <div class="entry-section">
                <div class="entry-title">
                    <span class="icon">🎯</span>
                    Entrada 2
                </div>
                <div class="input-row">
                    <div class="input-group">
                        <label class="input-label">Capital Asignado</label>
                        <div class="currency-input">
                            <span class="currency-symbol">$</span>
                            <input type="number" class="input-field" id="entry2Capital" placeholder="2000" step="0.01">
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Take Profit (%)</label>
                        <input type="number" class="input-field" id="entry2Percent" placeholder="7" step="0.1">
                    </div>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateDualEntry()">
                Calcular Proyecciones Duales
            </button>
        </div>

        <div class="panel">
            <h2 class="panel-title">
                <span class="icon">💰</span>
                Resumen de Resultados
            </h2>
            
            <div class="results-grid" id="resultsContainer">
                <div class="result-card">
                    <div class="result-label">Capital Total Usado</div>
                    <div class="result-value" id="totalUsedCapital">$0.00</div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">Ganancia Proyectada Entrada 1</div>
                    <div class="result-value" id="entry1ProjectedProfit">$0.00</div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">Ganancia Proyectada Entrada 2</div>
                    <div class="result-value" id="entry2ProjectedProfit">$0.00</div>
                </div>

                <div class="result-card">
                    <div class="result-label">Capital Final Proyectado</div>
                    <div class="result-value" id="finalProjectedCapital">$0.00</div>
                </div>
            </div>

            <div class="projection-summary" id="summaryCard" style="display: none;">
                <div class="summary-title">📈 Resumen de Estrategia</div>
                <div class="summary-text" id="summaryText"></div>
            </div>
        </div>
    </div>

    <!-- Sección de Proyecciones -->
    <div class="projection-section" id="projectionsSection" style="display: none;">
        <!-- Proyección Entrada 1 -->
        <div class="projection-panel">
            <h3 class="projection-title">
                <span class="icon">📊</span>
                Proyección Entrada 1
            </h3>
            <div id="entry1ProjectionList"></div>
        </div>

        <!-- Proyección Entrada 2 -->
        <div class="projection-panel">
            <h3 class="projection-title">
                <span class="icon">📊</span>
                Proyección Entrada 2
            </h3>
            <div id="entry2ProjectionList"></div>
        </div>

        <!-- Proyección Combinada -->
        <div class="projection-panel">
            <h3 class="projection-title">
                <span class="icon">🎯</span>
                Proyección Combinada
            </h3>
            <div id="combinedProjectionList"></div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>Creado por <strong>ExagTrader</strong> - Todos los derechos reservados © 2025</p>
            <p>
                <span class="icon">📱</span>
                Contacto: <a href="https://t.me/ExagTraderCEO" target="_blank" class="footer-link">https://t.me/ExagTraderCEO</a>
            </p>
        </div>
    </footer>

    <script>
        function calculateDualEntry() {
            // Obtener valores
            const totalCapital = parseFloat(document.getElementById('totalCapital').value) || 0;
            const numberOfOperations = parseInt(document.getElementById('numberOfOperations').value) || 1;
            
            const entry1Capital = parseFloat(document.getElementById('entry1Capital').value) || 0;
            const entry1Percent = parseFloat(document.getElementById('entry1Percent').value) || 0;
            
            const entry2Capital = parseFloat(document.getElementById('entry2Capital').value) || 0;
            const entry2Percent = parseFloat(document.getElementById('entry2Percent').value) || 0;

            // Validaciones
            if (totalCapital <= 0) {
                alert('Por favor, ingresa un capital total válido');
                return;
            }

            if (entry1Capital <= 0 && entry2Capital <= 0) {
                alert('Por favor, ingresa al menos un capital para una de las entradas');
                return;
            }

            if ((entry1Capital > 0 && entry1Percent <= 0) || (entry2Capital > 0 && entry2Percent <= 0)) {
                alert('Por favor, ingresa porcentajes válidos para las entradas activas');
                return;
            }

            const totalUsed = entry1Capital + entry2Capital;
            if (totalUsed > totalCapital) {
                alert('El capital total asignado no puede exceder el capital disponible');
                return;
            }

            // Calcular proyecciones independientes
            const entry1Projections = calculateIndependentProjections(entry1Capital, entry1Percent, numberOfOperations);
            const entry2Projections = calculateIndependentProjections(entry2Capital, entry2Percent, numberOfOperations);
            
            // Calcular proyección combinada (fusionada con interés compuesto conjunto)
            const combinedProjections = calculateCombinedProjections(entry1Capital, entry1Percent, entry2Capital, entry2Percent, numberOfOperations);

            // Actualizar resultados
            const finalEntry1 = entry1Projections.length > 0 ? entry1Projections[entry1Projections.length - 1].totalCapital : entry1Capital;
            const finalEntry2 = entry2Projections.length > 0 ? entry2Projections[entry2Projections.length - 1].totalCapital : entry2Capital;
            const finalCombined = combinedProjections.length > 0 ? combinedProjections[combinedProjections.length - 1].totalCapital : totalUsed;

            document.getElementById('totalUsedCapital').textContent = `${totalUsed.toFixed(2)}`;
            document.getElementById('entry1ProjectedProfit').textContent = `${(finalEntry1 - entry1Capital).toFixed(2)}`;
            document.getElementById('entry2ProjectedProfit').textContent = `${(finalEntry2 - entry2Capital).toFixed(2)}`;
            document.getElementById('finalProjectedCapital').textContent = `${finalCombined.toFixed(2)}`;

            // Mostrar resumen
            const totalReturn = ((finalCombined - totalUsed) / totalUsed * 100).toFixed(2);
            const summaryText = document.getElementById('summaryText');
            summaryText.innerHTML = `
                💼 <strong>Capital utilizado:</strong> ${totalUsed.toFixed(2)} de ${totalCapital.toFixed(2)} (${(totalUsed/totalCapital*100).toFixed(1)}%)<br>
                📈 <strong>Retorno combinado proyectado:</strong> ${totalReturn}% tras ${numberOfOperations} operaciones<br>
                💰 <strong>Ganancia combinada:</strong> ${(finalCombined - totalUsed).toFixed(2)}<br>
                🎯 <strong>Capital final combinado:</strong> ${finalCombined.toFixed(2)}
            `;
            document.getElementById('summaryCard').style.display = 'block';

            // Mostrar proyecciones
            displayIndependentProjections(entry1Projections, 'entry1ProjectionList', 'Entrada 1');
            displayIndependentProjections(entry2Projections, 'entry2ProjectionList', 'Entrada 2');
            displayCombinedProjections(combinedProjections, 'combinedProjectionList');
            
            document.getElementById('projectionsSection').style.display = 'grid';
        }

        function calculateIndependentProjections(capital, percent, operations) {
            if (capital <= 0 || percent <= 0) return [];
            
            const projections = [];
            let currentCapital = capital;
            const profitRate = percent / 100;
            
            for (let i = 1; i <= operations; i++) {
                const operationCapital = currentCapital;
                const profit = operationCapital * profitRate;
                currentCapital += profit;
                
                projections.push({
                    number: i,
                    operationCapital: operationCapital,
                    profit: profit,
                    totalCapital: currentCapital
                });
            }
            
            return projections;
        }

        function calculateCombinedProjections(entry1Capital, entry1Percent, entry2Capital, entry2Percent, operations) {
            if ((entry1Capital <= 0 || entry1Percent <= 0) && (entry2Capital <= 0 || entry2Percent <= 0)) return [];
            
            const projections = [];
            let currentEntry1Capital = entry1Capital;
            let currentEntry2Capital = entry2Capital;
            let currentTotalCapital = entry1Capital + entry2Capital;
            
            const entry1Rate = entry1Percent / 100;
            const entry2Rate = entry2Percent / 100;
            
            // Calcular proporciones iniciales
            const initialTotal = entry1Capital + entry2Capital;
            const entry1Proportion = entry1Capital / initialTotal;
            const entry2Proportion = entry2Capital / initialTotal;
            
            for (let i = 1; i <= operations; i++) {
                // Calcular capital para cada entrada basado en la proporción del capital total actual
                const entry1OpCapital = currentTotalCapital * entry1Proportion;
                const entry2OpCapital = currentTotalCapital * entry2Proportion;
                
                // Calcular ganancias
                const entry1Profit = entry1OpCapital * entry1Rate;
                const entry2Profit = entry2OpCapital * entry2Rate;
                const totalProfit = entry1Profit + entry2Profit;
                
                // Actualizar capitales
                currentTotalCapital += totalProfit;
                
                projections.push({
                    number: i,
                    entry1OpCapital: entry1OpCapital,
                    entry2OpCapital: entry2OpCapital,
                    entry1Profit: entry1Profit,
                    entry2Profit: entry2Profit,
                    totalProfit: totalProfit,
                    totalCapital: currentTotalCapital
                });
            }
            
            return projections;
        }

        function displayIndependentProjections(projections, containerId, title) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (projections.length === 0) {
                container.innerHTML = `<p style="color: #B7BDC6; text-align: center; padding: 1rem;">No hay datos para mostrar</p>`;
                return;
            }
            
            projections.forEach(proj => {
                const projDiv = document.createElement('div');
                projDiv.className = 'projection-item';
                projDiv.innerHTML = `
                    <span class="projection-number">Op. ${proj.number}</span>
                    <div style="text-align: right;">
                        <div style="font-size: 12px; color: #B7BDC6; margin-bottom: 4px;">
                            Abrir con: <span style="color: #F0B90B; font-weight: 600;">${proj.operationCapital.toFixed(2)}</span>
                        </div>
                        <div>
                            <span style="color: #B7BDC6;">Ganancia: </span>
                            <span class="projection-amount">+${proj.profit.toFixed(2)}</span>
                            <span style="color: #B7BDC6; margin-left: 10px;">Total: </span>
                            <span class="projection-amount">${proj.totalCapital.toFixed(2)}</span>
                        </div>
                    </div>
                `;
                container.appendChild(projDiv);
            });
        }

        function displayCombinedProjections(projections, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (projections.length === 0) {
                container.innerHTML = `<p style="color: #B7BDC6; text-align: center; padding: 1rem;">No hay datos para mostrar</p>`;
                return;
            }
            
            projections.forEach(proj => {
                const projDiv = document.createElement('div');
                projDiv.className = 'projection-item combined-item';
                projDiv.innerHTML = `
                    <span class="projection-number">Op. ${proj.number}</span>
                    <div style="text-align: right;">
                        <div style="font-size: 11px; color: #B7BDC6; margin-bottom: 4px;">
                            E1: <span style="color: #F0B90B;">${proj.entry1OpCapital.toFixed(2)}</span> | 
                            E2: <span style="color: #F0B90B;">${proj.entry2OpCapital.toFixed(2)}</span>
                        </div>
                        <div>
                            <span style="color: #B7BDC6;">Ganancia: </span>
                            <span class="projection-amount">+${proj.totalProfit.toFixed(2)}</span>
                            <span style="color: #B7BDC6; margin-left: 10px;">Total: </span>
                            <span class="projection-amount">${proj.totalCapital.toFixed(2)}</span>
                        </div>
                    </div>
                `;
                container.appendChild(projDiv);
            });
        }

        // Permitir cálculo con Enter
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateDualEntry();
            }
        });

        // Formatear números mientras se escriben
        function formatCurrency(input) {
            input.addEventListener('input', function(e) {
                let value = e.target.value.replace(/[^\d.]/g, '');
                if (value) {
                    e.target.value = value;
                }
            });
        }

        // Aplicar formato a los campos de moneda
        formatCurrency(document.getElementById('totalCapital'));
        formatCurrency(document.getElementById('entry1Capital'));
        formatCurrency(document.getElementById('entry2Capital'));
    </script>
</body>
</html>
